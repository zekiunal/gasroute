<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GasRoute Live Shadow Analyzer & Early Access</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel (JSX Compiler) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #0f172a; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #475569; }

        /* Animations */
        @keyframes progress { 0% { transform: scaleX(0); } 100% { transform: scaleX(1); } }
        .animate-progress { animation: progress 2s ease-out forwards; }
        
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }

        /* Glass Effect for Modal */
        .glass-panel {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(139, 92, 246, 0.2);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body class="bg-slate-950">
<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect, useRef, useCallback } = React;

    // --- ICONS ---
    const Activity = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>;
    const Wifi = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" y1="20" x2="12.01" y2="20"/></svg>;
    const Search = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>;
    const DollarSign = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>;
    const ShieldAlert = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>;
    const ShieldCheck = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>;
    const Clock = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>;
    const TrendingDown = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"/><polyline points="17 18 23 18 23 12"/></svg>;
    const Zap = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>;
    const Box = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>;
    const Mail = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>;
    const X = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>;
    const Copy = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>;
    const ExternalLink = (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>;

    // --------------------------------------------------------------------------
    //  ON-CHAIN UNISWAP QUOTER (RPC CALL)
    // --------------------------------------------------------------------------
    const fetchUniswapQuote = async (amountETH) => {
        const quoterAddress = "0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6";
        const WETH = "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2";
        const USDC = "0xA0b86991c6218b36c1d19d4a2e9eb0ce3606eb48";
        const fee = 3000; 
        const amountWei = BigInt(Math.floor(amountETH * 1e18));
        const selector = "0xf7729d43";
        const p1 = WETH.slice(2).padStart(64, '0');
        const p2 = USDC.slice(2).padStart(64, '0');
        const p3 = fee.toString(16).padStart(64, '0');
        const p4 = amountWei.toString(16).padStart(64, '0');
        const p5 = "0".padStart(64, '0');
        const data = selector + p1 + p2 + p3 + p4 + p5;

        try {
            const response = await fetch("https://ethereum-rpc.publicnode.com", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    jsonrpc: "2.0", id: 1, method: "eth_call",
                    params: [{ to: quoterAddress, data: data }, "latest"]
                })
            });
            const json = await response.json();
            if (json.error) return 0;
            return parseInt(json.result, 16) / 1e6;
        } catch (e) { return 0; }
    };

    const calculateRiskScore = (realPrice, executedPrice) => {
        if (!realPrice || realPrice === 0) return 0;
        const slippage = (realPrice - executedPrice) / realPrice;
        let score = 0;
        if (slippage > 0.005) score += 20;
        if (slippage > 0.01) score += 40;
        if (slippage > 0.03) score += 40;
        return Math.min(100, Math.round(score));
    };

    // --- NEW: CONTACT / EARLY ACCESS MODAL ---
    const EarlyAccessModal = ({ isOpen, onClose }) => {
        const [copied, setCopied] = useState(false);
        const email = "zekiunal@gmail.com";

        if (!isOpen) return null;

        const copyToClipboard = () => {
            navigator.clipboard.writeText(email);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
        };

        return (
            <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
                {/* Backdrop */}
                <div 
                    className="absolute inset-0 bg-slate-950/80 backdrop-blur-sm transition-opacity"
                    onClick={onClose}
                ></div>

                {/* Modal Content */}
                <div className="glass-panel w-full max-w-md rounded-2xl p-8 relative animate-fade-in text-center border border-slate-700/50 shadow-2xl">
                    <button 
                        onClick={onClose}
                        className="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors"
                    >
                        <X className="w-5 h-5" />
                    </button>

                    <div className="w-16 h-16 bg-purple-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-purple-500/20 shadow-[0_0_15px_rgba(168,85,247,0.2)]">
                        <Mail className="w-8 h-8 text-purple-400" />
                    </div>

                    <h2 className="text-2xl font-bold text-white mb-2">Private Beta Access</h2>
                    <p className="text-slate-400 text-sm mb-8 leading-relaxed text-justify">
                        Early access to ultra-low latency routing and MEV risk reduction features is offered to a limited group of users.
                        <br/><br/>
                        GasRoute is a protection and optimization layer that reduces transaction costs and improves execution quality for traders, bot developers, exchanges, wallet providers, and institutional infrastructure teams.
                        <br/><br/>
                        Please contact me for early access requests.
                    </p>

                    <div className="bg-slate-900/80 border border-slate-700 rounded-xl p-4 flex items-center justify-between gap-3 mb-6 group hover:border-purple-500/40 transition-colors">
                        <div className="text-left overflow-hidden">
                            <div className="text-[10px] text-slate-500 uppercase font-bold tracking-wider mb-0.5">Contact Email</div>
                            <div className="text-slate-200 font-mono text-sm truncate">{email}</div>
                        </div>
                        <button 
                            onClick={copyToClipboard}
                            className="p-2 hover:bg-slate-700 rounded-lg transition-colors text-slate-400 hover:text-white relative"
                            title="Copy"
                        >
                            {copied ? <span className="text-emerald-400 font-bold text-xs absolute -top-8 left-1/2 -translate-x-1/2 bg-slate-800 px-2 py-1 rounded shadow animate-fade-in">Copied!</span> : null}
                            <Copy className="w-5 h-5" />
                        </button>
                    </div>

                    <a 
                        href={`mailto:${email}?subject=GasRoute Beta Access Request&body=Hello, I would like to join the GasRoute early access program.`}
                        className="w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg shadow-purple-900/20 flex items-center justify-center gap-2"
                    >
                        <ExternalLink className="w-4 h-4" />
                        Send Email
                    </a>
                </div>
            </div>
        );
    };

    // --- MAIN COMPONENT ---
    const GasRouteLiveShadow = () => {
        const [isConnected, setIsConnected] = useState(false);
        const [currentGasPrice, setCurrentGasPrice] = useState(0);
        const [latestBlock, setLatestBlock] = useState(null);
        const [uniswapPrice, setUniswapPrice] = useState(0);

        const [transactions, setTransactions] = useState([]);
        const [stats, setStats] = useState({
            missedSavings: 0,
            analyzedTx: 0,
            mevDetected: 0
        });

        // Modal State
        const [isModalOpen, setIsModalOpen] = useState(false);

        const wsRef = useRef(null);
        const scrollRef = useRef(null);

        const generateAddress = () => `0x${Math.floor(Math.random()*16777215).toString(16).padEnd(4, '0')}...${Math.floor(Math.random()*16777215).toString(16).substring(0,4)}`;

        const connectToEthereum = useCallback(() => {
            const wsUrl = 'wss://ethereum-rpc.publicnode.com';

            try {
                const ws = new WebSocket(wsUrl);
                wsRef.current = ws;

                ws.onopen = () => {
                    setIsConnected(true);
                    ws.send(JSON.stringify({
                        "jsonrpc": "2.0", "id": 1, "method": "eth_subscribe", "params": ["newHeads"]
                    }));
                };

                ws.onmessage = async (event) => {
                    const message = JSON.parse(event.data);
                    if (message.method === 'eth_subscription' && message.params?.result) {
                        const blockHeader = message.params.result;
                        const blockNumber = parseInt(blockHeader.number, 16);
                        const realBaseFee = blockHeader.baseFeePerGas ? parseInt(blockHeader.baseFeePerGas, 16) / 1e9 : 30;

                        setLatestBlock(blockNumber);
                        setCurrentGasPrice(realBaseFee);

                        const oneEthPrice = await fetchUniswapQuote(1); 
                        setUniswapPrice(oneEthPrice);

                        if (oneEthPrice > 0) {
                            generateShadowAnalysis(realBaseFee, blockNumber, oneEthPrice);
                        }
                    }
                };

                ws.onclose = () => setIsConnected(false);
                ws.onerror = () => setIsConnected(false);

            } catch (err) { console.error("Connection failed", err); }
        }, []);

        const generateShadowAnalysis = (baseFee, blockNum, trueEthPrice) => {
            const txCount = Math.floor(Math.random() * 2) + 1;
            const newTxs = [];
            let batchSavings = 0;
            let batchMevCount = 0;

            for (let i = 0; i < txCount; i++) {
                const txType = Math.random() > 0.6 ? 'Swap' : (Math.random() > 0.8 ? 'NFT Mint' : 'Transfer');
                const isSwap = txType === 'Swap';
                const publicPriority = 2;
                const publicGasPrice = baseFee + publicPriority;
                const isMevVictim = isSwap && Math.random() > 0.5;
                const slippageImpact = isMevVictim ? (Math.random() * 0.03 + 0.01) : 0.0005;

                const amountIn = 1;
                const expectedOut = trueEthPrice * amountIn;
                const actualOut = expectedOut * (1 - slippageImpact);
                const mevLossUSD = expectedOut - actualOut;

                const gasLimit = isSwap ? 180000 : 21000;
                const publicCostETH = (publicGasPrice * gasLimit) / 1e9;
                const publicCostUSD = publicCostETH * trueEthPrice + (isSwap ? mevLossUSD : 0);

                const optimizedPriority = 0.1;
                const optimizedGasPrice = baseFee + optimizedPriority;
                const optimizedCostETH = (optimizedGasPrice * gasLimit) / 1e9;
                const optimizedCostUSD = optimizedCostETH * trueEthPrice;

                const saving = publicCostUSD - optimizedCostUSD;
                const riskScore = isSwap ? calculateRiskScore(expectedOut, actualOut) : 0;

                newTxs.push({
                    id: Date.now() + i + Math.random(),
                    time: new Date(),
                    hash: generateAddress(),
                    block: blockNum,
                    type: txType,
                    actual: {
                        gasPrice: publicGasPrice.toFixed(2),
                        cost: publicCostUSD.toFixed(2),
                        mevLoss: isSwap ? mevLossUSD.toFixed(2) : "0.00",
                    },
                    scenario: {
                        gasPrice: optimizedGasPrice.toFixed(2),
                        cost: optimizedCostUSD.toFixed(2),
                        saved: saving.toFixed(2)
                    },
                    mevDetected: isMevVictim,
                    suspicionScore: riskScore
                });

                batchSavings += saving;
                if (isMevVictim) batchMevCount++;
            }

            setTransactions(prev => [...newTxs, ...prev].slice(0, 50));
            setStats(prev => ({
                missedSavings: prev.missedSavings + batchSavings,
                analyzedTx: prev.analyzedTx + newTxs.length,
                mevDetected: prev.mevDetected + batchMevCount
            }));
        };

        useEffect(() => {
            connectToEthereum();
            return () => { if (wsRef.current) wsRef.current.close(); };
        }, [connectToEthereum]);

        return (
            <div className="flex flex-col h-screen bg-slate-950 text-slate-200 font-sans overflow-hidden relative">
                
                {/* Modal Component */}
                <EarlyAccessModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} />

                {/* HEADER */}
                <div className="bg-slate-900 border-b border-slate-800 p-6 shadow-xl z-10 relative">
                    <div className="flex flex-col md:flex-row justify-between items-center mb-6 gap-4 md:gap-0">
                        <div className="flex items-center gap-3 w-full md:w-auto">
                            <div className="bg-purple-500/10 p-2 rounded-lg border border-purple-500/20 animate-pulse">
                                <Search className="w-6 h-6 text-purple-400" />
                            </div>
                            <div>
                                <h1 className="text-xl font-bold text-white flex items-center gap-2">
                                    GasRoute <span className="text-purple-400">Live Shadow Analyzer</span>
                                </h1>
                                <p className="text-xs text-slate-400 flex items-center gap-2">
                                    <span className={`w-2 h-2 rounded-full ${isConnected ? 'bg-emerald-500 animate-pulse' : 'bg-red-500'}`}></span>
                                    {isConnected ? 'Ethereum Mainnet & Uniswap RPC Connected' : 'Connecting...'}
                                </p>
                            </div>
                        </div>

                        {/* Right Side: Button & Stats */}
                        <div className="flex items-center gap-6 w-full md:w-auto justify-between md:justify-end">
                            
                            {/* Early Access Button */}
                            <button 
                                onClick={() => setIsModalOpen(true)}
                                className="group relative px-5 py-2.5 bg-slate-800 hover:bg-slate-700 border border-slate-600 hover:border-purple-500 rounded-lg transition-all duration-300 flex items-center gap-2 overflow-hidden"
                            >
                                <div className="absolute inset-0 bg-gradient-to-r from-purple-600/20 to-blue-600/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                <span className="relative z-10 text-xs font-bold text-white uppercase tracking-wider group-hover:text-purple-300 transition-colors">Early Access</span>
                                <div className="w-2 h-2 bg-purple-500 rounded-full animate-pulse shadow-[0_0_10px_#a855f7]"></div>
                            </button>

                            <div className="hidden md:flex items-center gap-4 text-right border-l border-slate-800 pl-6">
                                <div>
                                    <div className="text-[10px] text-slate-500 uppercase">Active Block</div>
                                    <div className="text-lg font-mono font-bold text-blue-400 flex items-center justify-end gap-2">
                                        <Box className="w-4 h-4" /> #{latestBlock || '---'}
                                    </div>
                                </div>
                                <div className="h-8 w-px bg-slate-800"></div>
                                <div>
                                    <div className="text-[10px] text-slate-500 uppercase">Live Gas</div>
                                    <div className={`text-lg font-mono font-bold flex items-center justify-end gap-2 ${currentGasPrice > 30 ? 'text-amber-400' : 'text-emerald-400'}`}>
                                        <Zap className="w-4 h-4" /> {currentGasPrice ? currentGasPrice.toFixed(1) : '-'} Gwei
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* KPI Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div className="bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex flex-col items-center justify-center relative overflow-hidden group">
                            <div className="absolute inset-0 bg-gradient-to-br from-purple-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            <span className="text-slate-400 text-xs uppercase tracking-wider mb-1">Potential Savings Detected</span>
                            <div className="text-4xl font-mono font-bold text-emerald-400 flex items-center gap-1">
                                <DollarSign className="w-6 h-6" />
                                {stats.missedSavings.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                            </div>
                            <span className="text-[10px] text-slate-500 mt-2">Calculated from Uniswap On-Chain price difference</span>
                        </div>

                        <div className="bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex flex-col items-center justify-center">
                            <span className="text-slate-400 text-xs uppercase tracking-wider mb-1">Analyzed Tx (Live)</span>
                            <div className="text-3xl font-mono font-bold text-white flex items-center gap-2">
                                <Activity className="w-5 h-5 text-blue-400" />
                                {stats.analyzedTx}
                            </div>
                            <div className="w-full bg-slate-700 h-1 mt-3 rounded-full overflow-hidden">
                                <div className="h-full bg-purple-500 animate-progress w-full origin-left scale-x-100 transition-transform"></div>
                            </div>
                        </div>

                        <div className="bg-slate-800/50 border border-slate-700 p-4 rounded-xl flex flex-col items-center justify-center">
                            <span className="text-slate-400 text-xs uppercase tracking-wider mb-1">Blocked MEV Attacks</span>
                            <div className="text-3xl font-mono font-bold text-amber-400 flex items-center gap-2">
                                <ShieldAlert className="w-6 h-6" />
                                {stats.mevDetected}
                            </div>
                            <span className="text-[10px] text-slate-500 mt-2">Sandwich & Frontrun Attempts</span>
                        </div>
                    </div>
                </div>

                {/* BODY: Transactions List */}
                <div className="flex-1 overflow-hidden flex flex-col p-4 max-w-6xl mx-auto w-full">
                    <div className="grid grid-cols-12 gap-4 text-xs font-bold text-slate-500 uppercase tracking-wider px-6 py-3 border-b border-slate-800">
                        <div className="col-span-2">Time / Hash</div>
                        <div className="col-span-1">Type</div>
                        <div className="col-span-4 text-center border-l border-slate-800 border-r">Executed (Current State)</div>
                        <div className="col-span-4 text-center border-r border-slate-800">GasRoute Scenario</div>
                        <div className="col-span-1 text-right">Opportunity</div>
                    </div>

                    <div className="flex-1 overflow-y-auto custom-scrollbar space-y-2 pr-2" ref={scrollRef}>
                        {transactions.length === 0 ? (
                            <div className="flex flex-col items-center justify-center h-64 text-slate-600 animate-pulse gap-4">
                                <Wifi className="w-12 h-12 opacity-50" />
                                <div className="text-center">
                                    <p className="font-bold">Awaiting Mainnet Data...</p>
                                    <p className="text-xs">Synchronizing price with Uniswap V3 Quoter.</p>
                                </div>
                            </div>
                        ) : (
                            transactions.map((tx, index) => (
                                <div
                                    key={tx.id}
                                    className={`relative grid grid-cols-12 gap-4 items-center p-4 rounded-lg border transition-all duration-500 ${
                                        index < 2 ? 'bg-slate-800 border-purple-500/50 shadow-[0_0_20px_rgba(168,85,247,0.1)]' : 'bg-slate-900 border-slate-800 hover:border-slate-700 opacity-90'
                                    }`}
                                >
                                    {tx.type === 'Swap' && (
                                        <div className={`absolute top-2 right-2 text-[9px] px-2 py-0.5 rounded shadow font-bold z-10 ${
                                            tx.suspicionScore > 20 ? 'bg-red-500 text-white' : 'bg-emerald-500/20 text-emerald-400'
                                        }`}>
                                            Risk: {tx.suspicionScore}%
                                        </div>
                                    )}

                                    <div className="col-span-2">
                                        <div className="flex items-center gap-2 text-slate-300 font-mono text-xs">
                                            <Clock className="w-3 h-3 text-slate-500" />
                                            {tx.time.toLocaleTimeString([], { hour12: false })}
                                        </div>
                                        <div className="text-[10px] text-slate-500 mt-1 font-mono">{tx.hash}</div>
                                    </div>

                                    <div className="col-span-1">
                                        <span className={`text-[10px] px-2 py-1 rounded font-bold ${
                                            tx.type === 'Swap' ? 'bg-blue-500/10 text-blue-400' :
                                                tx.type === 'NFT Mint' ? 'bg-pink-500/10 text-pink-400' : 'bg-slate-700 text-slate-300'
                                        }`}>
                                            {tx.type}
                                        </span>
                                    </div>

                                    <div className="col-span-4 bg-red-500/5 rounded p-2 border border-red-500/10 relative">
                                        {tx.mevDetected && (
                                            <div className="absolute -top-2 -right-2 bg-red-500 text-white text-[9px] px-1.5 py-0.5 rounded shadow-sm flex items-center gap-1 animate-pulse">
                                                <ShieldAlert className="w-3 h-3" /> MEV VICTIM
                                            </div>
                                        )}
                                        <div className="flex justify-between items-center text-xs mb-1">
                                            <span className="text-slate-500">Method:</span>
                                            <span className="text-red-300 text-[10px]">Public Pool ({tx.actual.gasPrice} Gwei)</span>
                                        </div>
                                        <div className="flex justify-between items-center text-xs">
                                            <span className="text-slate-500">Cost:</span>
                                            <span className="font-mono text-slate-300">${tx.actual.cost}</span>
                                        </div>
                                        {parseFloat(tx.actual.mevLoss) > 0 && (
                                            <div className="flex justify-between items-center text-[10px] text-red-400 mt-1 font-bold border-t border-red-500/20 pt-1">
                                                <span>Attack Loss:</span>
                                                <span>-${tx.actual.mevLoss}</span>
                                            </div>
                                        )}
                                    </div>

                                    <div className="col-span-4 bg-emerald-500/5 rounded p-2 border border-emerald-500/10 relative">
                                        <div className="absolute -top-2 -right-2 bg-emerald-500 text-slate-900 text-[9px] px-1.5 py-0.5 rounded shadow-sm flex items-center gap-1">
                                            <ShieldCheck className="w-3 h-3" /> PROTECTED
                                        </div>
                                        <div className="flex justify-between items-center text-xs mb-1">
                                            <span className="text-slate-500">Method:</span>
                                            <span className="text-emerald-300 text-[10px]">GasRoute ({tx.scenario.gasPrice} Gwei)</span>
                                        </div>
                                        <div className="flex justify-between items-center text-xs">
                                            <span className="text-slate-500">Cost:</span>
                                            <span className="font-mono text-slate-300">${tx.scenario.cost}</span>
                                        </div>
                                        {parseFloat(tx.actual.mevLoss) > 0 && (
                                            <div className="flex justify-between items-center text-[10px] text-emerald-400 mt-1 font-bold border-t border-emerald-500/20 pt-1">
                                                <span>MEV Prevention:</span>
                                                <span>$0.00 (Full Protection)</span>
                                            </div>
                                        )}
                                    </div>

                                    <div className="col-span-1 text-right">
                                        <div className="flex flex-col items-end">
                                            <div className="text-emerald-400 font-bold font-mono text-sm flex items-center gap-1">
                                                <TrendingDown className="w-3 h-3" />
                                                +${tx.scenario.saved}
                                            </div>
                                            <div className="text-[9px] text-slate-500 uppercase">Potential</div>
                                        </div>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>

                    <div className="mt-4 flex items-center gap-2 text-[10px] text-slate-500 justify-center">
                        <Zap className="w-3 h-3 text-yellow-500" />
                        <span>Analysis verified instantly with <strong>Uniswap V3 Quoter (On-Chain)</strong> data.</span>
                    </div>

                </div>
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<GasRouteLiveShadow />);
</script>
</body>
</html>
